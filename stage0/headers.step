name=headers
version=5.13.6
source1="https://cdn.kernel.org/pub/linux/kernel/v5.x/linux-${version}.tar.xz"

build() {
    cd linux-*

    step_msg "Configuring headers"
    
    export ARCH="${SERPENT_TARGET_ARCH}"
    make ARCH="${SERPENT_TARGET_ARCH}" mrproper
    make ARCH="${SERPENT_TARGET_ARCH}" headers
    find usr/include -name '.*' -delete
    rm -vf usr/include/Makefile

    step_msg "Installing headers"
    
    install -D -d -m 00755 "${SERPENT_INSTALL_DIR}/usr/include"
    cp -Rv usr/include "${SERPENT_INSTALL_DIR}/usr/."
}